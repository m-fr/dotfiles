- defaults:
    link:
      relink: true
      force: true
    shell:
      quiet: true
      stderr: true

- clean: ['~', '~/.local/bin']

- shell:
  - command: cd meta && ./apt.sh packages
    description: Installing APT packages
    stdin: true
    stdout: true
    stderr: false

- shell:
  - [git submodule update --init --recursive, Installing submodules]
  - [cd mons && DESTDIR=$HOME/.local make install, Installing mons]
  - [curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y, Installing rust]
  - [cd eww && cargo build --release --no-default-features --features x11 && mv target/release/eww $HOME/.local/bin/, Installing eww]
  - [cargo install --git https://github.com/lsd-rs/lsd.git --branch master, Installing lsd]

- create:
  - ~/.local/share/fonts

- shell:
  - [cd ~/.local/share/fonts && curl -fLO https://github.com/ryanoasis/nerd-fonts/raw/v3.0.2/patched-fonts/FiraCode/Regular/FiraCodeNerdFont-Regular.ttf, Installing Fira Code Nerd Font]

- link:
    ~/.vimrc: vim/vimrc

    ~/.bashrc: bash/bashrc
    ~/.bash_aliases: bash/alias
    ~/.env: bash/env
    ~/.profile: bash/profile

    ~/.Xresources: x11/resources
    ~/.xsessionrc: x11/session

- create:
    - ~/.config/bspwm
    - ~/.config/cava
    - ~/.config/dunst
    - ~/.config/lsd
    - ~/.config/rofi
    - ~/.config/sxhkd
    - ~/.shortcuts

- link:
    ~/.config/bspwm:
      glob: true
      path: bspwm/*
    ~/.config/cava:
      glob: true
      path: cava/*
    ~/.config/dunst:
      glob: true
      path: dunst/*
    ~/.config/lsd:
      glob: true
      path: lsd/*
    ~/.config/rofi:
      glob: true
      path: rofi/*
    ~/.config/sxhkd:
      glob: true
      path: sxhkd/*
    ~/.shortcuts:
      glob: true
      path: shortcuts/*

- create:
    - ~/.config/eww
    - ~/.config/polybar

- link:
    ~/.config/eww:
      if: '[ `hostname` != debian  ]'
      glob: true
      path: widgets/*
    ~/.config/polybar:
      if: '[ `hostname` = debian  ]'
      glob: true
      path: polybar/*

- create:
    - ~/.local/bin
    - ~/.wallpaper

- link:
    ~/.local/bin:
      glob: true
      path: bin/*
    ~/.wallpaper:
      glob: true
      path: wallpaper/*

